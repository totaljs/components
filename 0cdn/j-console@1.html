<style>.ui-console{position:fixed;left:0;right:0;bottom:0;transition:all 0.15s;transform:translate(0,150px);height:150px;z-index:32;border:5px solid rgba(100,100,100,0.1);border-bottom:0}.ui-console-visible{transform:translate(0,0)}.ui-console-tabs{height:26px;padding:0;background-color:rgba(230,230,230,0.8)}.ui-console-tabs span{float:left;min-width:24px;height:26px;line-height:26px;text-align:center;cursor:pointer;color:gray;font-size:12px;padding:0 7px}.ui-console-tabs span i{margin-right:5px}.ui-console-tabs>div{float:left}.ui-console-tabs span:hover{color:#000}.ui-console-selected{background-color:#FFF;color:#000 !important}.ui-console-output{height:120px;background-color:#FFF;overflow:auto;overflow-scrolling:touch}.ui-console-tabs>.ui-console-close{color:red !important;float:right;border-right:0}.ui-console-message{height:24px;font-size:12px;border-bottom:1px solid #F0F0F0;line-height:24px;padding:0 5px 0 6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:30px}.ui-console-message i{width:12px;margin-right:7px;text-align:center}.ui-console-error{color:red}.ui-console-warning{color:#E8A826}.ui-console-success{color:#8CC152}.ui-console-info{color:#3BAFDA}.ui-console-body{overflow:hidden}.ui-dark .ui-console{border:5px solid rgba(0,0,0,0.8)}.ui-dark .ui-console-tabs{height:26px;padding:0;background-color:rgba(0,0,0,0.8)}.ui-dark .ui-console-output{background-color:#222}.ui-dark .ui-console-selected{background-color:#222;color:#FFF !important}.ui-dark .ui-console-message{border-bottom-color:#303030}.ui-dark .ui-console-tabs span:hover{color:#FFF}</style>
<script>COMPONENT('console@1',function(self,config,cls){var cls2='.'+cls,etabs,source,elogs,current,ready=false;self.singleton();self.readonly();self.make=function(){self.aclass(cls+' hidden');self.append('<div class="{0}-body"><div class="{0}-tabs"><span class="{0}-close"><i class="ti ti-times"></i></span><div></div></div><div class="{0}-output"></div></div>'.format(cls));etabs=self.find(cls2+'-tabs > div');elogs=self.find(cls2+'-output');self.event('click',cls2+'-tab',function(){var el=$(this);var id=el.attrd('id');self.show(id)});self.event('click',cls2+'-close',function(){self.set(false)});self.on('resize2 + resize',self.resize);self.resize()};self.resize=function(){elogs.css('width',WW+30)};self.render_tabs=function(){if(!source)return;var keys=Object.keys(source);var builder=[];for(var i=0;i<keys.length;i++){var item=source[keys[i]];if(!current)current=keys[i];var icon=self.icon(item.icon);builder.push(('<span title="{1}" data-id="{2}" class="'+cls+'-tab{3}"><i class="{0}"></i>{1}</span>').format(icon+(item.name?'':'" style="margin-right:0'),item.name,keys[i],current===keys[i]?(' '+cls+'-selected'):''))}etabs.html(builder.join(''));current&&self.render_logs(source[current])};self.render_logs=function(obj){if(!obj){elogs.empty();return}var builder=[],arr=obj.items||EMPTYARRAY;for(var i=0;i<arr.length;i++){var item=arr[i],type=item.type||'info',icon=type==='error'?'bug':type==='warning'?type:type==='success'?'check-circle':'info-circle';builder.push('<div class="{0}-message {0}-{2}"><i class="ti ti-{3}"></i>{1}</div>'.format(cls,obj.encode===true||obj.encode==null?Thelpers.encode(item.body):item.body,type,icon))}elogs.html(builder.join(''));elogs[0].scrollTop=0};self.show=function(id){if(current===id||!ready)return;etabs.find(cls2+'-selected').rclass(cls+'-selected');etabs.find(cls2+'-tab[data-id="{0}"]'.format(id)).aclass(cls+'-selected');current=id;self.render_logs(source[id])};self.rebind=function(path,value){if(!ready)return;source=value;if(path===config.datasource)self.render_tabs();else if(path.substring(config.datasource.length+1).substring(0,current.length)===current)self.render_logs(source[current])};self.configure=function(key,value){if(key==='datasource')self.datasource(value,self.rebind)};self.setter=function(value){if(value&&!ready){ready=true;self.rebind(config.datasource,GET(config.datasource))}if(value){self.rclass('hidden');if(typeof(value)==='string')self.show(value);self.aclass(cls+'-visible',100)}else{self.rclass('hidden',100);self.rclass(cls+'-visible')}}});</script>