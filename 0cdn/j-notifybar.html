<style>.ui-notifybar{position:fixed;left:20px;right:20px;z-index:100;bottom:20px;border-radius:100px;background-color:#FFF;box-shadow:0 -2px 10px rgba(0,0,0,0.05);height:40px;border:1px solid #E0E0E0}.ui-notifybar-controls button{border:0;background:transparent;border-radius:var(--radius);height:37px;width:22px;padding:0;margin:1px 0 0;color:#000}.ui-notifybar-controls button:hover{color:gray}.ui-notifybar-controls button:disabled{color:silver;cursor:not-allowed}.ui-notifybar-controls{border-right:1px solid #E0E0E0;height:38px;float:left;width:55px;text-align:center}.ui-notifybar-body{margin-left:65px;line-height:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui-notifybar-body i{margin-right:5px}.ui-notifybar-1 .ui-notifybar-body i{color:#8CC152}.ui-notifybar-2 .ui-notifybar-body i{color:#DB3737}.ui-notifybar-3 .ui-notifybar-body i{color:#4285F4}.ui-dark .ui-notifybar{background-color:#282828;border-color:#404040}.ui-dark .ui-notifybar-controls button{color:#FFF}.ui-dark .ui-notifybar-controls button:disabled{color:#505050}.ui-dark .ui-notifybar-controls{border-right-color:#404040}</style>
<script>COMPONENT('notifybar','timeout:5000',function(self,config,cls){self.singleton();self.readonly();self.nocompile&&self.nocompile();self.history=[];var cls2='.'+cls,body,buttons,prevtype,timeout,currentindex=0;self.make=function(){self.aclass(cls+' hidden');self.append('<div class="{0}-controls"><button name="prev" disabled><i class="ti ti-angle-left"></i></button><button name="next" disabled><i class="ti ti-angle-right"></i></button></div><div class="{0}-body">OK</div>'.format(cls));self.event('click',cls2+'-body',self.hide);self.event('click','button',function(){self[this.name]()});body=self.find(cls2+'-body');buttons=self.find('button')};self.hide=function(){self.aclass('hidden')};self.next=function(){currentindex++;self.draw(config.timeout*2)};self.prev=function(){currentindex--;self.draw(config.timeout*2)};self.show=function(){currentindex=self.history.length-1;if(currentindex>=0){self.draw(config.timeout);self.check()}};self.draw=function(delay){prevtype&&self.rclass(cls+'-'+prevtype);var msg=self.history[currentindex];if(msg.body.indexOf('ti-')===-1)msg.body='<i class="ti ti-'+(msg.type===1?'check-circle':msg.type===2?'warning':'info-circle')+'"></i>'+msg.body;body.html(msg.body);buttons[0].disabled=!self.history.length||currentindex===0;buttons[1].disabled=!self.history.length||currentindex>=(self.history.length-1);prevtype=msg.type;self.aclass(cls+'-'+prevtype);self.rclass('hidden');timeout&&clearTimeout(timeout);timeout=setTimeout(self.hide,delay)};self.success=function(body){currentindex=self.history.push({type:1,body:body})-1;self.draw(config.timeout);self.check()};self.warning=function(body){currentindex=self.history.push({type:2,body:body})-1;self.draw(config.timeout);self.check()};self.response=function(message,callback,response){var fn;if(typeof(message)==='function'){response=callback;fn=message;message=null}else if(typeof(callback)==='function')fn=callback;else{response=callback;fn=null}if(response instanceof Array){var builder=[];for(var i=0;i<response.length;i++){var err=response[i].error;err&&builder.push(err)}self.warning(builder.join('<br />'))}else if(typeof(response)==='string')self.warning(response);else{if(message){if(message.length<40&&message.charAt(0)==='?')SET(message,response);else self.success(message)}if(typeof(fn)==='string')SET(fn,response);else if(fn)fn(response)}};self.info=function(body){currentindex=self.history.push({type:3,body:body})-1;self.draw(config.timeout);self.check()};self.check=function(){if(self.history.length>20)self.history.unshift()}});</script>