<style>.ui-dropfiles{position:fixed;left:10px;top:10px;right:10px;bottom:10px;z-index:-1;display:none;background-color:rgba(0,0,0,0.4);border:2px dashed rgba(0,0,0,0.6);border-radius:var(--radius)}.ui-dropfiles-visible{display:block;z-index:500}.ui-dropfiles>div{display:flex;width:100%;height:100%;align-items:center;justify-content:center;font-size:16px;color:#FFF;pointer-events:none}.ui-dark .ui-dropfiles{background-color:rgba(200,200,200,0.4);border:2px dashed rgba(200,200,200,0.6)}.ui-dark .ui-dropfiles>div{color:#D0D0D0}</style>
<script>COMPONENT('dropfiles',function(self,config,cls){self.readonly();self.singleton();self.nocompile();var has=false,is=false,events='dragenter dragover dragexit drop dragleave',check=null,hide=function(){is=false;self.rclass(cls+'-visible');config.class&&has&&self.rclass('over');has=false;check=null};self.destroy=function(){$(W).off(events,self.filehandler)};self.make=function(){self.aclass(cls).rclass('hidden');self.element.wrapInner('<div><div></div></div>');$(W).on(events,self.filehandler)};self.filehandler=function(e){if(config.check){if(!check)check=GET(self.makepath(config.check));if(check&&!check(e)){hide();return}}if(config.disabled)return;if(e.type==='dragenter'){is=e.originalEvent.dataTransfer.types.includes('Files');self.tclass(cls+'-visible',is)}if(!is)return;e.stopPropagation();e.preventDefault();switch(e.type){case'drop':break;case'dragenter':case'dragover':has=true;return;case'dragleave':case'dragexit':default:if(is&&e.target===self.dom)setTimeout2(self.ID,hide,300);return}hide();self.EXEC(config.exec,e.originalEvent.dataTransfer.files,e)}});</script>