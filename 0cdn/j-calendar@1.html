<style>.ui-calendar *{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;font-size:12px}.ui-calendar{font-size:12px;position:absolute;background-color:white;max-width:250px;width:100%;border:1px solid #E0E0E0;left:100px;top:100px;border-radius:2px;z-index:100;color:gray;box-shadow:0 5px 25px rgba(0,0,0,0.1);opacity:0;filter:alpha(opacity=0);transform:scale(0.6);-webkit-transform:scale(0.6);-moz-transform:scale(0.6);-ms-transform:scale(0.6);transition:all 0.2s;-webkit-transition:all 0.2s;-moz-transition:all 0.2s;-ms-transition:all 0.2s}.ui-calendar-visible{transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);opacity:1;filter:alpha(opacity=100)}.ui-calendar-table{padding:10px}.ui-calendar table{width:100%;margin:0;table-layout:fixed}.ui-calendar table td{text-align:center;vertical-align:middle;font-size:11px;color:#505050}.ui-calendar table td div{margin:2px;padding:5px 0;border-radius:4px}.ui-calendar table th{padding:8px 0 5px;text-align:center;width:14%;vertical-align:middle;font-weight:bold;font-size:12px;color:black}.ui-calendar-disabled{color:silver !important;cursor:pointer}.ui-calendar-day{}.ui-calendar-day-today div{background-color:#F0F0F0;font-weight:bold}.ui-calendar-selected div{background-color:#F8F7DA;font-weight:bold}.ui-calendar-day:hover div{background-color:#F8F7DA;cursor:pointer}.ui-calendar button{background-color:white;border:0;outline:0;border:1px solid #D0D0D0;border-radius:3px;width:24px;height:21px;font-size:11px;line-height:0;text-align:center;padding:0;vertical-align:middle;cursor:pointer}.ui-calendar button:hover{background-color:#F0F0F0}.ui-calendar-header{height:40px;border-bottom:1px solid #E0E0E0;padding:0 10px 0}.ui-calendar-header-info{text-align:center;width:168px;float:left;font-size:14px;margin:8px 0 0 7px;font-weight:bold;color:black}.ui-calendar-header-prev{float:left;margin-top:9px}.ui-calendar-header-next{float:right;margin-top:9px}.ui-calendar-today{padding:8px 10px;border-top:1px solid #E0E0E0;background-color:#F0F0F0}.ui-calendar-today .fa{margin-right:6px}.ui-calendar-header select{background-color:white;border:1px solid #E0E0E0;height:23px;outline:0;cursor:pointer;appearance:none;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;padding:0 10px;border-radius:3px}.ui-calendar-today a:first-child{float:right;color:#B7292E;font-weight:bold}.ui-calendar select::-ms-expand{display:none}.hidden{display:none}</style>
<script>COMPONENT('calendar@1','today:Set today;firstday:0;close:Close;yearselect:true;monthselect:true;yearfrom:-70 years;yearto:5 years',function(self,config){var skip=false,skipDay=false,visible=false;self.days=EMPTYARRAY;self.months=EMPTYARRAY;self.months_short=EMPTYARRAY;self.years_from;self.years_to;self.readonly();self.nocompile&&self.nocompile();self.click=function(){};self.configure=function(key,value){switch(key){case'days':if(value instanceof Array)self.days=value;else self.days=value.split(',').trim();for(var i=0;i<DAYS.length;i++){DAYS[i]=self.days[i];self.days[i]=DAYS[i].substring(0,2).toUpperCase()}break;case'months':if(value instanceof Array)self.months=value;else self.months=value.split(',').trim();self.months_short=[];for(var i=0,length=self.months.length;i<length;i++){var m=self.months[i];MONTHS[i]=m;if(m.length>4)m=m.substring(0,3)+'.';self.months_short.push(m)}break;case'yearfrom':if(value.indexOf('current')!==-1)self.years_from=parseInt(new Date().format('yyyy'));else self.years_from=parseInt(new Date().add(value).format('yyyy'));break;case'yearto':if(value.indexOf('current')!==-1)self.years_to=parseInt(new Date().format('yyyy'));else self.years_to=parseInt(new Date().add(value).format('yyyy'));break}};function getMonthDays(dt){var m=dt.getMonth();var y=dt.getFullYear();if(m===-1){m=11;y--}return(32-new Date(y,m,32).getDate())}self.calculate=function(year,month,selected){var d=new Date(year,month,1,12,0);var output={header:[],days:[],month:month,year:year},firstDay=config.firstday,firstCount=0,frm=d.getDay()-firstDay;var today=new Date();var ty=today.getFullYear();var tm=today.getMonth();var td=today.getDate();var sy=selected?selected.getFullYear():-1;var sm=selected?selected.getMonth():-1;var sd=selected?selected.getDate():-1;var days=getMonthDays(d);if(frm<0)frm=7+frm;while(firstCount++<7){output.header.push({index:firstDay,name:self.days[firstDay]});firstDay++;if(firstDay>6)firstDay=0}var index=0,indexEmpty=0,count=0,prev=getMonthDays(new Date(year,month-1,1,12,0))-frm;var cur;for(var i=0;i<days+frm;i++){var obj={isToday:false,isSelected:false,isEmpty:false,isFuture:false,number:0,index:++count};if(i>=frm){obj.number=++index;obj.isSelected=sy===year&&sm===month&&sd===index;obj.isToday=ty===year&&tm===month&&td===index;obj.isFuture=ty<year;if(!obj.isFuture&&year===ty){if(tm<month)obj.isFuture=true;else if(tm===month)obj.isFuture=td<index}}else{indexEmpty++;obj.number=prev+indexEmpty;obj.isEmpty=true;cur=d.add('-'+indexEmpty+' days')}if(!obj.isEmpty)cur=d.add(i+' days');obj.month=i>=frm&&obj.number<=days?d.getMonth():cur.getMonth();obj.year=i>=frm&&obj.number<=days?d.getFullYear():cur.getFullYear();obj.date=cur;output.days.push(obj)}indexEmpty=0;for(var i=count;i<42;i++){var cur=d.add(i+' days');var obj={isToday:false,isSelected:false,isEmpty:true,isFuture:true,number:++indexEmpty,index:++count};obj.month=cur.getMonth();obj.year=cur.getFullYear();obj.date=cur;output.days.push(obj)}return output};self.hide=function(){if(visible){self.older=null;self.aclass('hidden');self.rclass('ui-calendar-visible');visible=false}return self};self.toggle=function(el,value,callback,offset){if(self.older===el[0]){!self.hclass('hidden')&&self.hide()}else{self.older=el[0];self.show(el,value,callback,offset)}return self};self.show=function(el,value,callback,offset){setTimeout(function(){clearTimeout2('calendarhide')},5);if(!el)return self.hide();var off=el.offset();var h=el.innerHeight();var l=off.left+(offset||0);var t=off.top+h+12,s=250;if(l+s>WW){var w=el.innerWidth();l=(l+w)-s}self.css({left:l,top:t});self.rclass('hidden');self.click=callback;self.date(value);visible=true;self.aclass('ui-calendar-visible',50);return self};self.make=function(){self.aclass('ui-calendar hidden');var conf={};if(!config.days){conf.days=[];for(var i=0;i<DAYS.length;i++)conf.days.push(DAYS[i].substring(0,2).toUpperCase())}!config.months&&(conf.months=MONTHS);self.reconfigure(conf);self.event('click','.ui-calendar-today-a',function(){var dt=new Date();self.hide();if(self.click){if(typeof(self.click)==='string'){SET(self.click,dt);CHANGE(self.click,true)}else self.click(dt)}});self.event('click','.ui-calendar-day',function(){var arr=this.getAttribute('data-date').split('-');var dt=new Date(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2]),12,0);self.find('.ui-calendar-selected').rclass('ui-calendar-selected');var el=$(this).aclass('ui-calendar-selected');skip=!el.hclass('ui-calendar-disabled');self.hide();if(self.click){if(typeof(self.click)==='string'){SET(self.click,dt);CHANGE(self.click,true)}else self.click(dt)}});self.event('click','.ui-calendar-header',function(e){e.stopPropagation()});self.event('change','.ui-calendar-year',function(e){clearTimeout2('calendarhide');e.preventDefault();e.stopPropagation();var arr=this.getAttribute('data-date').split('-');var dt=new Date(parseInt(arr[0]),parseInt(arr[1]),1,12,0);dt.setFullYear(this.value);skipDay=true;self.date(dt)});self.event('change','.ui-calendar-month',function(e){clearTimeout2('calendarhide');e.preventDefault();e.stopPropagation();var arr=this.getAttribute('data-date').split('-');var dt=new Date(parseInt(arr[0]),parseInt(arr[1]),1,12,0);dt.setMonth(this.value);skipDay=true;self.date(dt)});self.event('click','button',function(e){e.preventDefault();e.stopPropagation();var arr=this.getAttribute('data-date').split('-');var dt=new Date(parseInt(arr[0]),parseInt(arr[1]),1,12,0);switch(this.name){case'prev':dt.setMonth(dt.getMonth()-1);break;case'next':dt.setMonth(dt.getMonth()+1);break}var current_year=dt.getFullYear();if(current_year<self.years_from||current_year>self.years_to)return;skipDay=true;self.date(dt)});$(window).on('scroll click',function(){visible&&setTimeout2('calendarhide',function(){EXEC('$calendar.hide')},20)});window.$calendar=self;self.on('reflow',function(){visible&&EXEC('$calendar.hide')})};self.date=function(value){var clssel='ui-calendar-selected';if(typeof(value)==='string')value=value.parseDate();if(!value||isNaN(value.getTime())){self.find('.'+clssel).rclass(clssel);value=NOW}var empty=!value;if(skipDay){skipDay=false;empty=true}if(skip){skip=false;return}if(!value)value=NOW=new Date();var output=self.calculate(value.getFullYear(),value.getMonth(),value);var builder=[];for(var i=0;i<42;i++){var item=output.days[i];if(i%7===0){builder.length&&builder.push('</tr>');builder.push('<tr>')}var cls=[];item.isEmpty&&cls.push('ui-calendar-disabled');cls.push('ui-calendar-day');!empty&&item.isSelected&&cls.push(clssel);item.isToday&&cls.push('ui-calendar-day-today');builder.push('<td class="{0}" data-date="{1}-{2}-{3}"><div>{3}</div></td>'.format(cls.join(' '),item.year,item.month,item.number))}builder.push('</tr>');var header=[];for(var i=0;i<7;i++)header.push('<th>{0}</th>'.format(output.header[i].name));var years=value.getFullYear();if(config.yearselect){years='';var current_year=value.getFullYear();for(var i=self.years_from;i<=self.years_to;i++)years+='<option value="{0}" {1}>{0}</option>'.format(i,i===current_year?'selected':'');years='<select data-date="{0}-{1}" class="ui-calendar-year">{2}</select>'.format(output.year,output.month,years)}var months=self.months[value.getMonth()];if(config.monthselect){months='';var current_month=value.getMonth();for(var i=0,l=self.months.length;i<l;i++)months+='<option value="{0}" {2}>{1}</option>'.format(i,self.months[i],i===current_month?'selected':'');months='<select data-date="{0}-{1}" class="ui-calendar-month">{2}</select>'.format(output.year,output.month,months)}self.html('<div class="ui-calendar-header"><button class="ui-calendar-header-prev" name="prev" data-date="{0}-{1}"><span class="fa fa-arrow-left"></span></button><div class="ui-calendar-header-info">{2} {3}</div><button class="ui-calendar-header-next" name="next" data-date="{0}-{1}"><span class="fa fa-arrow-right"></span></button></div><div class="ui-calendar-table"><table cellpadding="0" cellspacing="0" border="0"><thead>{4}</thead><tbody>{5}</tbody></table></div>'.format(output.year,output.month,months,years,header.join(''),builder.join(''))+(config.today?'<div class="ui-calendar-today"><a href="javascript:void(0)">{0}</a><a href="javascript:void(0)" class="ui-calendar-today-a"><i class="fa fa-calendar"></i>{1}</a></div>'.format(config.close,config.today):''))}});</script>