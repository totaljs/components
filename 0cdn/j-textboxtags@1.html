<style>.ui-textboxtags{border:1px solid #E0E0E0;padding:3px;border-radius:2px;position:relative;display:block;width:100%;background-color:#FFF}.ui-textboxtags-label{margin-bottom:3px;font-size:12px;text-align:left}.ui-textboxtags-label .fa{width:14px}.ui-textboxtags-required .ui-textboxtags-label{font-weight:bold}.ui-textboxtags-required .ui-textboxtags-label:before{color:red;content:'***';margin-right:5px}.ui-textboxtags-invalid .ui-textboxtags{border:1px solid #E1A1A1 !important;background-color:#FFF3F3 !important}.ui-textboxtags-values{min-height:60px}.ui-textboxtags-tag{padding:3px 6px 3px 8px;line-height:16px;vertical-align:middle;background-color:#4783EE;font-size:12px;position:relative;display:inline-block;margin:2px;border-radius:2px;color:#FFF;font-weight:bold}.ui-textboxtags-tag .fa{font-size:12px;color:#A8C3F5;margin-left:5px;cursor:pointer}.ui-textboxtags input{background-color:transparent;font-size:12px;color:#000;width:auto;position:relative;display:inline-block;border:0;width:99px;outline:0;margin:2px 3px;padding:3px 0}.ui-textboxtags-container.ui-disabled .ui-textboxtags{background-color:#F0F0F0}.ui-textboxtags-container.ui-disabled input{display:none}.ui-textboxtags-container.ui-disabled .ui-textboxtags-tag .fa{display:none}</style>
<script>COMPONENT('textboxtags@1',function(self,config,cls){var cls2='.'+cls,isString=false,container,content=null,refresh=false;if(!W.$textboxtagstemplate)W.$textboxtagstemplate=Tangular.compile('<div class="'+cls+'-tag" data-name="{{ name}}">{{ name}}<i class="fa fa-times"></i></div>');var template=W.$textboxtagstemplate;self.nocompile&&self.nocompile();self.validate=function(value){return config.disabled||!config.required?true:value&&value.length>0};self.configure=function(key,value,init){if(init)return;var redraw=false;switch(key){case'disabled':self.tclass('ui-disabled',value);self.find('input').prop('disabled',value);self.reset();break;case'required':self.tclass(cls+'-required',value);self.state(1,1);break;case'icon':var fa=self.find(cls2+'-label > i');if(fa.length&&value)fa.rclass().aclass('fa fa-'+value);else redraw=true;break;case'placeholder':self.find('input').prop('placeholder',value);break;case'height':self.find(cls2+'-values').css('height',value);break;case'label':redraw=true;break;case'type':self.type=value;isString=self.type==='string';break}redraw&&setTimeout2('redraw'+self.id,function(){refresh=true;container.off();self.redraw();self.refresh()},100)};self.redraw=function(){var label=config.label||content,html='<div class="'+cls+'-values"'+(config.height?' style="min-height:'+config.height+'px"':'')+'><input type="text" placeholder="'+(config.placeholder||'')+'" /></div>';isString=self.type==='string';if(content.length){self.html(('<div class="'+cls+'-label">{0}{1}:</div><div class="'+cls+'">{2}</div>').format((config.icon?'<i class="fa fa-'+config.icon+'"></i> ':''),label,html))}else{self.aclass(cls);self.html(html)}container=self.find(cls2+'-values');config.disabled&&self.reconfigure('disabled:true')};self.make=function(){self.aclass(cls+'-container');config.required&&self.aclass(cls+'-required');content=self.html();self.type=config.type||'';self.redraw();self.event('click','.fa-times',function(e){if(config.disabled)return;e.preventDefault();e.stopPropagation();var el=$(this);var arr=self.get();if(isString)arr=self.split(arr);if(!arr||!(arr instanceof Array)||!arr.length)return;var index=arr.indexOf(el.parent().attrd('name'));if(index===-1)return;arr.splice(index,1);self.set(isString?arr.join(', '):arr);self.change(true)});self.event('click',function(){!config.disabled&&self.find('input').focus()});self.event('focus','input',function(){config.focus&&self.EXEC(config.focus,$(this),self)});self.event('keydown','input',function(e){if(config.disabled)return;if(e.which===8){if(this.value)return;var arr=self.get();if(isString)arr=self.split(arr);if(!arr||!(arr instanceof Array)||!arr.length)return;arr.pop();self.set(isString?arr.join(', '):arr);self.change(true);return}if(e.which!==13)return;e.preventDefault();if(!this.value)return;var arr=self.get();var value=this.value;if(config.uppercase)value=value.toUpperCase();else if(config.lowercase)value=value.toLowerCase();if(isString)arr=self.split(arr);if(!(arr instanceof Array))arr=[];if(arr.indexOf(value)===-1)arr.push(value);else return;this.value='';self.set(isString?arr.join(', '):arr);self.change(true)})};self.split=function(value){if(!value)return[];var arr=value.split(',');for(var i=0,length=arr.length;i<length;i++)arr[i]=arr[i].trim();return arr};self.setter=function(value){if(!refresh&&NOTMODIFIED(self.id,value))return;refresh=false;container.find(cls2+'-tag').remove();if(!value||!value.length)return;var arr=isString?self.split(value):value;var builder='';for(var i=0,length=arr.length;i<length;i++)builder+=template({name:arr[i]});container.prepend(builder)};self.state=function(type){if(!type)return;var invalid=config.required?self.isInvalid():false;if(invalid===self.$oldstate)return;self.$oldstate=invalid;self.tclass(cls+'-invalid',invalid)}});</script>