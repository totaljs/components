<style>.listmenu a{display:block;padding:2px 5px}.listmenu .selected{background-color:#F0F0F0}</style>
<script>COMPONENT('listmenu','class:selected;selector:a;property:id;click:true',function(self,config){var old,oldvalue;self.readonly();self.nocompile&&self.nocompile();self.make=function(){var scr=self.find('script');self.template=Tangular.compile(scr.html());scr.remove()};self.configure=function(name,value){switch(name){case'datasource':self.datasource(value,self.rebind);break}};self.rebind=function(path,value){if(!value.length){self.empty();return}var builder=[],opt={length:value.length};for(var i=0;i<opt.length;i++){var item=value[i];opt.index=i;builder.push(self.template(item,opt))}oldvalue=null;self.html(builder.join(''));config.click&&self.find(config.selector).on('click',function(){var index=$(this).index();var item=self.get(config.datasource)[index];self.set(item[config.property])});self.refresh()};self.setter=function(value){var arr=self.get(config.datasource);if(arr.length){if(value===oldvalue)return;oldvalue=value;var index=config.property?arr.findIndex(config.property,value):arr.indexOf(value);old&&old.rclass(config.class);index!==-1&&(old=self.find(config.selector).eq(index).aclass(config.class))}}});</script>