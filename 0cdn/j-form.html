<style>.noscroll{overflow:hidden}.hidden{display:none}.ui-form-container{width:100%;position:fixed;left:0;top:0;bottom:0;right:0;background-color:rgba(230,233,237,0.8);z-index:5;overflow-y:scroll;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;overflow-scrolling:touch;-webkit-overflow-scrolling:touch;-moz-overflow-scrolling:touch;-ms-overflow-scrolling:touch}.ui-form-container-padding{padding:0 30px}.ui-form{background-color:white;margin:0 auto 30px;border-radius:4px;box-shadow:0 0 20px #D0D0D0;transform:translate(0,-500px);-webkit-transform:translate(0,-500px);-moz-transform:translate(0,-500px);-ms-transform:translate(0,-500px);transition:all 0.2s;-webkit-transition:all 0.2s;-moz-transition:all 0.2s;-ms-transition:all 0.2s;opacity:0;filter:alpha(opacity=0)}.ui-form-animate{transform:skewX(0deg);-webkit-transform:skewX(0deg);-moz-transform:skewX(0deg);-ms-transform:skewX(0deg);opacity:1;filter:alpha(opacity=100)}.ui-form-animate-click{transform:skewX(-5deg);-webkit-transform:skewX(-5deg);-moz-transform:skewX(-5deg);-ms-transform:skewX(-5deg)}.ui-form-padding{padding:0 30px}.ui-form-title{padding:18px 20px;font-size:16px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;color:#AAB2BD;background-color:#F8F8F8;border-bottom:1px solid #F0F0F0}.ui-form-title .ui-form-button-close{float:right;cursor:pointer;font-size:18px;margin:-2px 0 0 0;transition:all 0.2s;-webkit-transition:all 0.2s;-moz-transition:all 0.2s;-ms-transition:all 0.2s;background:none;border:0;outline:0;height:auto;color:red}.ui-form-title .ui-form-button-close:hover{transform:scale(1.2) rotate(-90deg);-webkit-transform:scale(1.2) rotate(-90deg);-moz-transform:scale(1.2) rotate(-90deg);-ms-transform:scale(1.2) rotate(-90deg)}.ui-form-title > span{font-weight:bold}.ui-form-title > .fa{margin-right:7px}.ui-form-buttons{padding:20px;border-top:5px solid #F0F0F0;background-color:#F8F8F8}.ui-form-buttons button{border:2px solid #E0E0E0;background-color:white;border-radius:4px;height:45px;padding:0 15px;color:black;margin:0;cursor:pointer;font-family:Arial;vertical-align:middle;outline:0;font-size:14px;text-decoration:none;transition:all 0.3s;-webkit-transition:all 0.3s;-moz-transition:all 0.3s;-ms-transition:all 0.3s}.ui-form-buttons button .fa{width:16px}.ui-form-buttons button:hover{border-color:silver}.ui-form-buttons button:active{background-color:#D0D0D0}.ui-form-buttons button:disabled{background-color:#F5F5F5 !important;border-color:#E0E0E0 !important;color:silver !important;cursor:not-allowed;box-shadow:none}.ui-form-buttons button[name="submit"]{width:220px;margin-right:15px;font-weight:bold}.ui-form-buttons button[name="cancel"]{color:gray}.ui-form-buttons div{position:relative;display:inline-block;vertical-align:middle}.ui-form-buttons label{float:right;margin:12px 0 0 0;font-size:11px}</style>
<script>COMPONENT('form',function(self,config){var W=window;var header=null;var csspos={};if(!W.$$form){W.$$form_level=W.$$form_level||1;W.$$form=true;$(document).on('click','.ui-form-button-close',function(){SET($(this).attr('data-path'),'');W.$$form_level--});$(window).on('resize',function(){SETTER('form','resize')});$(document).on('click','.ui-form-container',function(e){var el= $(e.target);if(!(el.hclass('ui-form-container-padding')||el.hclass('ui-form-container')))return;var form= $(this).find('.ui-form');var cls='ui-form-animate-click';form.aclass(cls);setTimeout(function(){form.rclass(cls)},300)})}self.readonly();self.submit=function(){if(config.submit)EXEC(config.submit,self);else self.hide()};self.cancel=function(){config.cancel&&EXEC(config.cancel,self);self.hide()};self.hide=function(){self.set('')};self.resize=function(){if(!config.center||self.hclass('hidden'))return;var ui=self.find('.ui-form');var fh=ui.innerHeight();var wh= $(W).height();var r=(wh/2)-(fh/2);csspos.marginTop=(r>30?(r-15):20)+'px';ui.css(csspos)};self.make=function(){var icon;if(config.icon)icon='<i class="fa fa-{0}"></i>'.format(config.icon);else icon='<i></i>';$(document.body).append('<div id="{0}" class="hidden ui-form-container"><div class="ui-form-container-padding"><div class="ui-form" style="max-width:{1}px"><div class="ui-form-title"><button class="ui-form-button-close" data-path="{2}"><i class="fa fa-times"></i></button>{4}<span>{3}</span></div></div></div>'.format(self._id,config.width||800,self.path,config.title,icon));var el= $('#'+self._id);el.find('.ui-form').get(0).appendChild(self.element.get(0));self.rclass('hidden');self.replace(el);header=self.virtualize({title:'.ui-form-title > span',icon:'.ui-form-title > i'});self.event('scroll',function(){EMIT('scroll',self.name);EMIT('reflow',self.name)});self.find('button').on('click',function(){W.$$form_level--;switch(this.name){case'submit':self.submit(self.hide);break;case'cancel':!this.disabled&&self[this.name](self.hide);break}});config.enter&&self.event('keydown','input',function(e){e.which===13&&!self.find('button[name="submit"]').get(0).disabled&&setTimeout(function(){self.submit(self.hide)},800)})};self.configure=function(key,value,init,prev){if(init)return;switch(key){case'icon':header.icon.rclass(header.icon.attr('class'));value&&header.icon.aclass('fa fa-'+value);break;case'title':header.title.html(value);break;case'width':value!==prev&&self.find('.ui-form').css('max-width',value+'px');break}};self.setter=function(value){setTimeout2('noscroll',function(){$('html').tclass('noscroll',!!$('.ui-form-container').not('.hidden').length)},50);var isHidden=value!==config.if;if(self.hclass('hidden')===isHidden)return;self.tclass('hidden',isHidden);setTimeout2('formreflow',function(){EMIT('reflow',self.name)},10);if(isHidden){self.release(true);self.find('.ui-form').rclass('ui-form-animate');return}self.resize();self.release(false);config.reload&&EXEC(config.reload,self);config.default&&DEFAULT(config.default,true);if(!isMOBILE&&config.autofocus){var el=self.find(config.autofocus===true?'input[type="text"],select,textarea':config.autofocus);el.length&&el.eq(0).focus()}if(W.$$form_level<1)W.$$form_level=1;W.$$form_level++;self.css('z-index',W.$$form_level*10);self.element.scrollTop(0);setTimeout(function(){self.element.scrollTop(0);self.find('.ui-form').aclass('ui-form-animate')},300);setTimeout2(self.id,function(){self.css('z-index',(W.$$form_level*10)+1)},1000)}});</script>